version: 1.0
runtime: nodejs18

build:
  commands:
    - npm ci
    - npx prisma generate
    - npm run build

run:
  command: sh -c "npx prisma migrate deploy && node dist/main.js"
  network:
    port: 3001

health_check:
  path: /
  interval: 10
  timeout: 5
  healthy_threshold: 1
  unhealthy_threshold: 5
